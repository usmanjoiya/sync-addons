<?xml version="1.0" encoding="UTF-8" ?>
<!-- Copyright 2020 Ivan Yelizariev <https://twitter.com/yelizariev>
     License MIT (https://opensource.org/licenses/MIT). -->
<odoo>
    <record id="sync_project_task_view_tree" model="ir.ui.view">
        <field name="name">sync.task.tree</field>
        <field name="model">sync.task</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name" />
                <field name="active" />
            </tree>
        </field>
    </record>
    <record id="sync_project_task_view_form" model="ir.ui.view">
        <field name="name">sync.task.form</field>
        <field name="model">sync.task</field>
        <field name="arch" type="xml">
            <form>
                <header>

                </header>
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <!-- Delete in Odoo 13 -->
                        <button
                            name="toggle_active"
                            type="object"
                            class="oe_stat_button"
                            icon="fa-archive"
                        >
                            <field
                                name="active"
                                widget="boolean_button"
                                options='{"terminology": "archive"}'
                            />
                        </button>
                    </div>
                    <!-- Uncomment in Odoo 13
                    <widget name="web_ribbon" text="Archived" bg_color="bg-danger" attrs="{'invisible': [('active', '=', True)]}"/>
                    <field name="active" invisible="1" />
                    -->
                    <div class="oe_title">
                        <h1>
                            <field name="name" placeholder="E.g. Sync Products" />
                        </h1>
                    </div>
                    <group>
                        <group>
                            <field
                                name="active_cron_ids"
                                widget="many2many_tags"
                                options="{'no_create': True}"
                                domain="[('sync_task_id', '=', active_id)]"
                            />
                            <field
                                name="active_automation_ids"
                                widget="many2many_tags"
                                options="{'no_create': True}"
                                domain="[('sync_task_id', '=', active_id)]"
                            />
                            <field
                                name="active_webhook_ids"
                                widget="many2many_tags"
                                options="{'no_create': True}"
                                domain="[('sync_task_id', '=', active_id)]"
                            />
                            <field
                                name="active_button_ids"
                                widget="many2many_tags"
                                options="{'no_create': True}"
                                domain="[('sync_task_id', '=', active_id)]"
                            />
                        </group>
                        <group>
                            <field name="project_id" />
                        </group>
                    </group>
                    <notebook>
                        <page name="code" string="Code">
                            <field
                                name="code"
                                widget="ace"
                                options="{'mode': 'python'}"
                            />
                        </page>
                        <page name="triggers" string="Available Triggers">
                            <separator string="Cron" />
                            <field name="cron_ids" context="{'active_test': False}">
                                <tree>
                                    <field name="trigger_name" />
                                    <field name="active" />
                                    <field name="interval_number" />
                                    <field name="interval_type" />
                                    <field name="nextcall" />
                                    <field name="numbercall" />
                                </tree>
                            </field>
                            <separator string="DB Triggers" />
                            <field
                                name="automation_ids"
                                context="{'active_test': False}"
                            >
                                <tree>
                                    <field name="trigger_name" />
                                    <field name="active" />
                                    <field name="model_id" />
                                    <field name="trigger" />
                                </tree>
                            </field>
                            <separator string="Webhooks" />
                            <field name="webhook_ids" context="{'active_test': False}">
                                <tree editable="bottom">
                                    <field name="trigger_name" />
                                    <field name="active" />
                                    <field name="website_url" />
                                </tree>
                            </field>
                            <separator
                                string="Buttons"
                                context="{'active_test': False}"
                            />
                            <field name="button_ids">
                                <tree editable="bottom">
                                    <field name="trigger_name" />
                                    <field name="active" />
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>
    <record id="sync_task_action_from_project" model="ir.actions.act_window">
        <field name="name">Tasks</field>
        <field name="res_model">sync.task</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('project_id', '=', active_id)]</field>
        <field name="context">
            {'default_project_id': active_id, 'active_test': False}
        </field>
    </record>
</odoo>

<?xml version="1.0" encoding="UTF-8" ?>
<!-- Copyright 2020 Ivan Yelizariev <https://twitter.com/yelizariev>
     License MIT (https://opensource.org/licenses/MIT). -->
<odoo>
    <record id="sync_project_action" model="ir.actions.act_window">
        <field name="name">Sync Projects</field>
        <field name="res_model">sync.project</field>
        <field name="view_mode">tree,form</field>
    </record>
    <record id="sync_project_view_tree" model="ir.ui.view">
        <field name="name">sync.project.tree</field>
        <field name="model">sync.project</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name" />
                <field name="active" />
            </tree>
        </field>
    </record>
    <record id="sync_project_view_form" model="ir.ui.view">
        <field name="name">sync.project.form</field>
        <field name="model">sync.project</field>
        <field name="arch" type="xml">
            <form>
                <header>

                </header>
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <!-- Delete in Odoo 13 -->
                        <button
                            name="toggle_active"
                            type="object"
                            class="oe_stat_button"
                            icon="fa-archive"
                        >
                            <field
                                name="active"
                                widget="boolean_button"
                                options='{"terminology": "archive"}'
                            />
                        </button>
                        <button
                            type="action"
                            name="%(sync.sync_task_action_from_project)d"
                            class="oe_stat_button"
                            icon="fa-tasks"
                        >
                            <field string="Tasks" name="task_count" widget="statinfo" />
                        </button>
                        <button
                            type="action"
                            name="%(sync.sync_trigger_cron_action_from_project)d"
                            class="oe_stat_button"
                            icon="fa-clock-o"
                        >
                            <field
                                string="Cron Triggers"
                                name="trigger_cron_count"
                                widget="statinfo"
                            />
                        </button>
                        <button
                            type="action"
                            name="%(sync.sync_trigger_automation_action_from_project)d"
                            class="oe_stat_button"
                            icon="fa-database"
                        >
                            <field
                                string="DB Triggers"
                                name="trigger_automation_count"
                                widget="statinfo"
                            />
                        </button>
                        <button
                            type="action"
                            name="%(sync.sync_trigger_webhook_action_from_project)d"
                            class="oe_stat_button"
                            icon="fa-globe"
                        >
                            <field
                                string="Webhook Triggers"
                                name="trigger_webhook_count"
                                widget="statinfo"
                            />
                        </button>
                        <button
                            type="action"
                            name="%(sync.sync_trigger_button_action_from_project)d"
                            class="oe_stat_button"
                            icon="fa-hand-pointer-o"
                        >
                            <field
                                string="Button Triggers"
                                name="trigger_button_count"
                                widget="statinfo"
                            />
                        </button>
                    </div>
                    <!-- Uncomment in Odoo 13
                    <widget name="web_ribbon" text="Archived" bg_color="bg-danger" attrs="{'invisible': [('active', '=', True)]}"/>
                    <field name="active" invisible="1" />
                    -->
                    <div class="oe_title">
                        <h1>
                            <field name="name" placeholder="E.g. Legacy Migration" />
                        </h1>
                    </div>
                    <notebook>
                        <page name="code" string="Code">
                            <field
                                name="secret_code"
                                widget="ace"
                                options="{'mode': 'python'}"
                            />
                            <field
                                name="common_code"
                                widget="ace"
                                options="{'mode': 'python'}"
                            />
                        </page>
                        <page name="params" string="Parameters">
                            <field name="param_ids">
                                <tree editable="botton">
                                    <field name="key" />
                                    <field name="value" />
                                    <field name="description" />
                                </tree>
                            </field>
                            <field name="secret_ids">
                                <tree editable="botton">
                                    <field name="key" />
                                    <field name="value" />
                                    <field name="description" />
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>
    <menuitem
        id="sync_project_menu_action"
        name="Sync Projects"
        parent="sync_menu"
        action="sync_project_action"
        sequence="10"
    />
    <act_window
        id="sync_make_module_action"
        name="Package project into a module"
        src_model="sync.project"
        res_model="sync.make.module"
        view_mode="form"
        target="new"
        context="{'default_project_id': active_id}"
    />
</odoo>
